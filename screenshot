import requests
import pandas as pd
from datetime import datetime

def get_10y_gilt_yield():
    url = "https://www.bankofengland.co.uk/boeapps/database/fromshowcolumns.asp"
    params = {
        "Travel": "NIxSTx",  # BoEâ€™s internal code for yields
        "SeriesCodes": "IUDSNPY",  # 10-year gilt yield code (verify this)
        "Datefrom": datetime.today().strftime('%d/%m/%Y'),
        "Dateto": datetime.today().strftime('%d/%m/%Y'),
        "CSVF": "TT",  # Request CSV format
    }
    response = requests.get(url, params=params)
    
    if response.status_code == 200:
        data = pd.read_csv(pd.compat.StringIO(response.text))
        latest_yield = data.iloc[-1]["IUDSNPY"]  # Adjust column name
        print(f"10-year UK gilt yield: {latest_yield}%")
    else:
        print("Failed to fetch data")

get_10y_gilt_yield()
